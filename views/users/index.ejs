<%- include("../partials/header") %>

<h2>Users List</h2>
<p>Welcome, <%= user.name %> | <a href="/logout">Logout</a></p>

<table border="1">
  <thead>
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Email</th>
      <th>Phone</th>
      <th>Profile Image</th>
    </tr>
  </thead>
  <tbody>
    <% users.forEach(u => { %>
      <tr>
        <td><%= u.id %></td>
        <td><%= u.name %></td>
        <td><%= u.email %></td>
        <td><%= u.phone %></td>
        <td>
          <% if(u.profile_image){ %>
            <img src="/uploads/<%= u.profile_image %>" width="50" />
          <% } %>
        </td>
      </tr>
    <% }) %>
  </tbody>
</table>

<!-- Pagination -->
<% if(totalPages > 1){ %>
  <div>
    <% for(let i = 1; i <= totalPages; i++){ %>
      <% if(i === page){ %>
        <span><%= i %></span>
      <% } else { %>
        <a href="/users/list?page=<%= i %>"><%= i %></a>
      <% } %>
    <% } %>
  </div>
<% } %>

<script src="/js/users.js"></script>

<%- include("../partials/footer") %>
